# Production-specific Docker Compose configuration
# This file extends docker-compose.yml with production settings
# Usage: docker compose -f docker-compose.yml -f docker-compose.prod.yml up

version: "3.8"

services:
  postgres:
    env_file:
      - .env.production

  backend:
    env_file:
      - .env.production
    # No volumes in production - use the built image
    # Override the base command to use the Dockerfile's production CMD
    # This overrides the dev default from docker-compose.yml
    command: ["node", "apps/backend/dist/index.js"]
    restart: always
